<!DOCTYPE html>
<html lang="en">

//11:51//
<head>
    <meta charset="UTF-8">
    <title>Final Project(2)</title>
</head>
<body>
    <div style = "width: 888px; margin: auto;">
        <canvas id = "myCanvas" width = "800" height = "500"
                style = "background: black;">
        </canvas>
    </div>

    <script>
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        var dir, score, balls, food;


        function init(){
            dir = 'right';
            score = 0;
            balls = [
                {x:40, y:40},
                {x:60, y:40},
                {x:80, y:40}
            ];
        }

        init();

        document.addEventListener("keydown", funxtion(e){
            var keyCode = e.keyCode;
            if(e.keyCode == 37 && dir != 'right'){
                dir = 'left';
            }
            if(e.keyCode == 38 && dir != 'down'){
                dir = 'up';
            }
            if(e.keyCode == 39 && dir != 'left'){
                dir = 'right';
            }
            if(e.keyCode == 40 && dir != 'up'){
                dir = 'down';
            }

        });

        function add(){
            var lastBall = balls[balls.length-1];
            if(dir == 'right'){
                balls.push({x:lastBall.x +20,y: lastBall.y});
            }
            if(dir == 'down'){
                balls.push({x:lastBall.x, y: lastBall.y +20});
            }

            if(dir == 'left'){
                balls.push({x:lastBall.x -20,y: lastBall.y});
            }
            if(dir == 'up'){
                balls.push({x:lastBall.x,y: lastBall.y -20});
            }

        }


        function ani(){
            ctx.clearRect(0,0, 888, 555);
            balls.shift();
            add();



            for( var i = 0; i<balls.length; i++){
                ball = balls[i];
                if(i == balls.length -1){
                    ctx.fillStyle = "lightgreen";
                }
                else{
                    ctx.fillStyle = "#ff0000";
                }

                if(ball.x > 780){
                    ball.x = 0
                }
                ctx.fillRect(ball.x, ball.y, 19, 19);
            }
        }

        setInterval(ani, 222);
    </script>

</body>
</html>